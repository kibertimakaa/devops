# Использование CI/CD: подробное руководство и инструменты

---

## Что такое CI/CD и зачем она нужна

- **Continuous Integration (CI)** — постоянная интеграция кода в общую ветку с последующей автоматической сборкой и тестированием. Помогает выявлять проблемы на раннем этапе.
- **Continuous Delivery (CD)** — автоматическая подготовка кода к релизу и возможность в любой момент выпустить обновление в продакшн.
- **Continuous Deployment** — расширение CD, когда поставка в продакшн происходит автоматически без ручного вмешательства.

---

## Основные этапы CI/CD пайплайна

1. **Триггер** — событие изменения кода в репозитории (push, merge, pull request) запускает процесс.
2. **Сборка (Build)** — компиляция кода, создание артефактов (бинарных файлов, docker-образов).
3. **Тестирование (Test)** — автоматический запуск юнит-тестов, интеграционных и системных тестов.
4. **Анализ качества кода** — проверка стиля, безопасность, покрытие тестами.
5. **Развертывание на тестовые среды (Deploy to staging)** — подготовка к релизу, проверка в боевых условиях с ограниченным доступом.
6. **Релиз (Release)** — перенос изменений в продакшн среду либо вручную, либо автоматически.
7. **Мониторинг и обратная связь** — слежение за работоспособностью и сбор метрик.

---

## Инструменты CI/CD

| Инструмент       | Краткое описание                                                  | Особенности                                               |
|------------------|------------------------------------------------------------------|------------------------------------------------------------|
| **Jenkins**      | Open-source сервер для CI/CD, гибко настраивается               | Плагины для любых этапов, работает на Java                   |
| **GitHub Actions** | Интегрированная CI/CD в GitHub                                  | Простая настройка через YAML, тесная интеграция с GitHub      |
| **GitLab CI/CD**  | Встроенный в GitLab CI/CD                                         | Сильная интеграция с системой контроля версий GitLab          |
| **CircleCI**      | Облачный сервис для CI/CD                                        | Высокая скорость, поддержка Docker                              |
| **Travis CI**     | Публичный облачный CI/CD для open-source и частных проектов      | Простота использования, интеграция с GitHub                   |
| **Azure DevOps**  | Корпоративный сервис CI/CD от Microsoft                          | Полный набор инструментов DevOps                              |
| **AWS CodePipeline** | Инструмент CI/CD от AWS                                        | Глубокая интеграция с AWS сервисами                           |
| **TeamCity**      | Сервер CI/CD от JetBrains                                       | Интуитивный интерфейс, мультиплатформенность                   |

---

## Пример простого CI/CD пайплайна (GitHub Actions)

name: CI/CD Pipeline

on:
push:
branches: [ main ]

jobs:
build-and-deploy:
runs-on: ubuntu-latest

text
steps:
- uses: actions/checkout@v2

- name: Set up Node.js
  uses: actions/setup-node@v1
  with:
    node-version: '14'

- name: Install dependencies
  run: npm install

- name: Run tests
  run: npm test

- name: Build project
  run: npm run build

- name: Deploy to production
  run: ./deploy.sh
text

---

## Рекомендации по использованию CI/CD

- Автоматизируйте все повторяющиеся операции, чтобы избежать ошибок.
- Используйте инфраструктуру как код (IaC) для воспроизводимых и переносимых окружений (например, Terraform, Ansible).
- Следите за метриками пайплайна — время выполнения, качество тестов, частота релизов.
- Интегрируйте мониторинг после деплоя (Prometheus, Grafana).
- Используйте секреты и безопасное хранение данных (Vault, GitHub Secrets).

---

CI/CD — фундамент современного DevOps-процесса для ускорения выхода кода в продакшн, улучшения качества и снижения рисков. Выбор инструментов и подходов зависит от проекта и команды, но данный обзор охватывает основные концепции и популярные решения.
